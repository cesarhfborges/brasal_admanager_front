<div class="row d-flex justify-content-center">
  <div class="col-8">
    <nb-card>
      <nb-card-header>
        <div class="row">
          <div class="col-8 pt-2">
            Lista de Filiais
          </div>
          <div class="col-4 d-flex justify-content-end">
            <button type="button" status="success" nbButton (click)="cadastrarPosto()">
              <nb-icon icon="plus-circle-outline"></nb-icon>&nbsp;Cadastrar
            </button>
          </div>
        </div>
      </nb-card-header>
      <nb-card-body>

        <p-table
          [value]="postos"
          [columns]="cols"
          [loading]="loading.filiais"
          dataKey="id"
          [rows]="15"
        >
          <ng-template pTemplate="loading">
            <tr>
              <th colspan="{{cols.length}}" class="text-center">
                Carregando Aguarde...
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th *ngFor="let col of columns" [ngStyle]="{width: col.width}" class="{{col.class}}">
                {{col.header}}
              </th>
              <th style="width: 100px;"></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
              <td *ngFor="let col of cols" class="{{col.class}}">
                {{rowData[col.field]}}
              </td>
              <td class="d-flex justify-content-end">
                <button type="button" nbButton outline status="info" (click)="editarPosto(rowData)">
                  <nb-icon icon="edit-outline"></nb-icon>
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>

        <div class="row pt-3" *ngIf="pagination">
          <div class="col-2 pt-2">
            <p class="p-0 m-0">Total: {{pagination.total}}</p>
          </div>
          <div class="col-10 d-flex justify-content-end">

            <nav aria-label="navigation">
              <ul class="pagination">
                <li class="page-item">
                  <button
                    class="page-link"
                    (click)="getPostos(1)"
                    [disabled]="pagination.current_page == 1"
                  >
                    Primeira
                  </button>
                </li>
                <li class="page-item" *ngFor="let link of pagination.links; let i = index">
                  <button
                    class="page-link"
                    [class.active]="link.active"
                    [disabled]="link.active || !link.url"
                    [ngSwitch]="link.label"
                    (click)="getPostos(parseUrl(link.url))"
                  >
                    <ng-template ngSwitchCase="pagination.next">Próximo</ng-template>
                    <ng-template ngSwitchCase="pagination.previous">Anterior</ng-template>
                    <ng-template ngSwitchDefault>{{link.label}}</ng-template>
                  </button>
                </li>
                <li class="page-item">
                  <button
                    class="page-link"
                    (click)="getPostos(pagination.last_page)"
                    [disabled]="pagination.current_page >= pagination.last_page"
                  >
                    Última
                  </button>
                </li>
              </ul>
            </nav>

          </div>
        </div>

      </nb-card-body>
    </nb-card>
  </div>
</div>
